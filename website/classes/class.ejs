<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Class</title>
    <link rel="stylesheet" href="/static/std.css">
    <link rel="stylesheet" href="/static/class.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet" />
</head>

<body>
    <nav>
        <div class="nav-item nav-text selected" onclick="openSection(0)">
            <h3>Overview</h3>
        </div>
        <div class="nav-item nav-text" onclick="openSection(1)">
            <h3>Sets</h3>
        </div>
        <div class="nav-item nav-text" onclick="openSection(2)">
            <h3>Members</h3>
        </div>
        <% if(classInfo.members.find(e=> e.id == userData.id).role>0) {%>
            <div class="nav-item nav-text" onclick="openSection(3)">
                <h3>Settings</h3>
            </div>
            <%}%>
                <script>
                    function openSection(section) {
                        const sections = document.getElementsByClassName("section")
                        const navTexts = document.getElementsByClassName("nav-text");
                        for (let i = 0; i < sections.length; i++) {
                            if (section == i) {
                                sections[i].style.display = "block"
                                navTexts[i].classList.add("selected")
                            } else {
                                sections[i].style.display = "none"
                                navTexts[i].classList.remove("selected")
                            }
                        };
                    }
                </script>
                <div class="nav-separator"></div>
                <div class="nav-item nav-create">
                    <p>Create</p>
                    <img src="/images/add.svg" alt="" />
                    <div class="create-dropdown">
                        <a href="/sets/new" class="create-dropdown-elem">Set</a>
                        <div href="/classes/new" class="create-dropdown-elem"
                            onclick="document.getElementById('background-darkener').style.display='inherit'">
                            Class
                        </div>
                    </div>
                </div>
                <img class="nav-item" src="/images/account.svg" alt="" />
    </nav>
    <div class="main">
        <div class="class-name">
            <h1>
                <%= classInfo.name%>
            </h1>

            <% if(parseInt(classInfo.language)+1 !=languages.length){ %>
                <p>
                    <%= languages[classInfo.language]%>
                </p>
                <%}%>

        </div>
        <div class="section">
            <div class="overview-updates">
                <div class="updates-section-top-container">
                    <div class="updates-section-top">
                        <h3>Updates</h3>
                        <% if(classInfo.members.find(e=> e.id == userData.id).role>0) { %>
                            <img src="/images/add.svg" alt="add">
                            <%}%>
                    </div>
                    <div class="updates-line"></div>
                </div>
                <div class="update-container">
                    <div class="update-icon-container">
                        <img src="/images/update-icons/book.svg" class="flipped-img">
                    </div>
                    <div class="update-name-container">
                        <h3>H3 paragraaf A</h3>
                        <p>5 jan.</p>
                    </div>
                    <div></div>
                    <img src="/images/more.svg" alt="open">
                </div>
            </div>
        </div>
        <div class="section" style="display: none;">

        </div>
        <div class="section" style="display: none;">
            <h2>Members:</h2>
            <ul class="members-list">
                <% for(let i=0;i<classInfo.members.length;i++) {%>
                    <li class="member">
                        <img src="/images/account-white.svg" class="member-icon" onerror="this.style.display = 'none'">
                        <p>
                            <%= classInfo.members[i].name%>
                                <% if(userData.id==classInfo.members[i].id) {%>
                                    (You)
                                    <%}else if(classInfo.members[i].role>0) {%>
                                        (<%= roles[classInfo.members[i].role]%>)
                                            <%}%>
                        </p>
                        <div class="member-homework"></div>
                        <div class="edit-member">
                            <label for="edit-member-checkbox<%=i%>">
                                <img src="/images/edit.svg" alt="edit">
                            </label>
                            <input hidden type="checkbox" class="edit-member-checkbox" id="edit-member-checkbox<%=i%>">
                            <div class="edit-member-section">
                                <% if(classInfo.members.find(e=> e.id ==
                                    userData.id).role>0&&classInfo.members.find(e=>e.id == userData.id).role
                                    >=classInfo.members[i].role&&userData.id!=classInfo.members[i].id) {%>
                                    <p>Remove</p>
                                    <%}%>
                                        <a href="/profile/<%=classInfo.members[i].id%>">Profile</a>
                            </div>
                        </div>
                    </li>
                    <%}%>
            </ul>
        </div>
        <div class="section" style="display: none;">
            <h2>Settings:</h2>
            <div class="settings-container">
                <div class="left-side">
                    <form action="/classes/update" method="POST">
                        <label>
                            Class name:
                            <input name="name" type="text" class="settings-class-name" autocomplete="off">
                        </label>
                        <div class="settings-class-language-container">
                            <label>Language:
                                <select name="language" class="settings-class-language">
                                    <option value="0">French</option>
                                    <option value="1">German</option>
                                    <option value="2">English</option>
                                    <option value="3">Spanish</option>
                                    <option value="4">Chinese</option>
                                    <option value="5">Other</option>
                                    <option value="6">Non specific</option>
                                </select>
                            </label>
                        </div>
                    </form>
                </div>
                <div class="right-side">
                    <label>
                        Invite link:
                        <div class="radio-container">
                            <label class="input-container">One
                                <input type="radio" name="radio" checked="checked">
                                <span class="checkmark"></span>
                            </label>

                            <label class="input-container">Two
                                <input type="radio" name="radio">
                                <span class="checkmark"></span>
                            </label>
                        </div>
                    </label>
                </div>
            </div>
        </div>
    </div>
    <div class="side-section">
        <h2 style="margin-bottom: 0;">Homework</h2>
        <a href="./<%=classInfo.id%>/homework" class="side-section-item">
            <div class="homework-item-left">
                <h4 class="homework-title">H3 paragraaf A</h4>
                <div class="homework-data-section" style="margin-left: auto;">
                    <p>5d&nbsp;</p>
                    <img src="/images/clock.svg" onerror="this.style.display='none'" style="margin-top: -1px;">
                    <p>&nbsp;-&nbsp;</p>
                    <p>32w&nbsp;</p>
                    <img src="/images/checklist.svg" onerror="this.style.display = 'none'">
                </div>
            </div>
            <img src="/images/more.svg" alt="more" class="homework-item-right">
        </a>
    </div>
    <div class="background-darkener" id="background-darkener" style="display: none;">
        <div class="class-create-section">
            <div class="class-create-top">
                <h1>Create a new class</h1>
                <img src="/images/close.svg" alt="close"
                    onclick="document.getElementById('background-darkener').style.display='none'">
            </div>
            <form action="/classes/new" method="POST">
                <label for="class-name">Class name:</label>
                <input name="name" autocomplete="off" type="text" id="class-name">
                <div class="class-language-container">
                    <label for="class-language">Language:</label>
                    <select name="language" id="class-language">
                        <option value="0">French</option>
                        <option value="1">German</option>
                        <option value="2">English</option>
                        <option value="3">Spanish</option>
                        <option value="4">Chinese</option>
                        <option value="5">Other</option>
                        <option value="6">Non specific</option>
                    </select>
                </div>
                <button class="" type="submit">Create</button>
            </form>
        </div>
    </div>
    <div class="background-darkener" id="new-update" style="display: none;">
        <div class="class-create-section">
            <div class="class-create-top">
                <h1>Create a new update</h1>
                <img src="/images/close.svg" alt="close"
                    onclick="document.getElementById('background-darkener').style.display='none'">
            </div>
            <form action="/classes/new" method="POST">
                <div class="new-update-title">
                    <label>
                        Update name:
                        <input name="name" autocomplete="off" type="text" class="new-update-name">
                    </label>
                    <div include="form-input-select()">
                        <select name="update-type" required>
                            <option value="" hidden>Update type:</option>

                            <option value="0">Homework</option>
                            <option value="1">Material</option>
                            <option value="2">Messages</option>
                        </select>
                    </div>
                </div>
                <label>
                    Description:
                    <input name="description" autocomplete="off" type="text" class="new-update-name">
                </label>
                <div class="solid-line"></div>
                <div class="upload-icons">
                    <img src="/images/upload-icons/upload.svg" alt="upload" title="Upload set.">
                    <img src="/images/upload-icons/cloud-upload.svg" alt="upload" title="Upload cloud set.">
                    <img src="/images/upload-icons/link.svg" alt="upload" title="Enter link of set.">
                    <img src="/images/upload-icons/add-box.svg" alt="upload" title="Create new set.">
                </div>
                <!--<button class="" type="submit">Post</button>-->
            </form>
        </div>
    </div>
</body>
<style>

</style>

</html>